---
import { getSubstackPosts } from "../lib/substack";
import Layout from "../layouts/Page.astro";

const posts = await getSubstackPosts();
---

<Layout
  title="Blog"
  description="Excerpts from Isiah's Substack where he posts about philosophy, hobbies, and adventures."
>
  <div class="blog-container">
    <div class="cards-grid">
      {
        posts.map((post) => (
          <article class="card">
            <div class="card-content">
              <time class="date">
                {post.date.toLocaleDateString("en-US", {
                  month: "numeric",
                  day: "numeric",
                  year: "numeric",
                })}
              </time>
              <h2 class="title">{post.title}</h2>
              <p class="excerpt">{post.excerpt}</p>
            </div>
            <a href={post.link} target="__blank" class="read-link">
              Read on Substack â†’
            </a>
          </article>
        ))
      }
    </div>
  </div>
</Layout>

<style>
  .blog-container {
    max-width: var(--content-width-wide);
    margin: 0 auto;
    padding: var(--space-3xl) var(--space-xl);
  }

  h1 {
    font-size: var(--font-size-5xl);
    color: var(--accent);
    margin-bottom: var(--space-3xl);
    text-align: center;
  }

  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-xl);
    max-width: 100%;
  }

  .card {
    background: rgba(var(--gray-dark), 100%);
    border: 1px solid rgba(var(--accent), 0.2);
    border-radius: var(--radius-xl);
    padding: var(--space-xl);
    display: flex;
    flex-direction: column;
    transition: all var(--transition-base);
    min-height: 280px;
    max-width: 400px;
    justify-self: center;
    cursor: pointer;
  }

  .card:hover {
    transform: translateY(-6px);
    box-shadow:
      0px 10px 15px -3px var(--accent-dark),
      0px 4px 6px -2px var(--accent),
      0px 2px 4px var(--accent-dark);
  }

  .card-content {
    flex: 1;
  }

  .date {
    display: block;
    font-size: var(--font-size-sm);
    color: rgba(var(--white), 0.6);
    margin-bottom: var(--space-sm);
  }

  .title {
    font-size: var(--font-size-xl);
    color: var(--accent);
    margin: 0 0 var(--space-md);
    line-height: var(--line-height-tight);
  }

  .excerpt {
    color: rgba(var(--white), 0.8);
    line-height: var(--line-height-base);
    margin-bottom: var(--space-lg);
    font-size: var(--font-size-md);
  }

  .read-link {
    color: var(--accent-light);
    text-decoration: none;
    font-weight: 500;
    align-self: flex-start;
    transition: color var(--transition-fast);
    font-size: var(--font-size-md);
  }

  .read-link:hover {
    color: var(--accent);
  }

  @media (max-width: 768px) {
    .cards-grid {
      grid-template-columns: 1fr;
    }

    .blog-container {
      padding: var(--space-2xl) var(--space-lg);
    }
  }
</style>
